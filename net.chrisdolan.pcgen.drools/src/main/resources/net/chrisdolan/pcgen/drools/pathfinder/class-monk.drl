package net.chrisdolan.pcgen.drools.pathfinder;
    dialect "java"

import net.chrisdolan.pcgen.drools.input.*;
import net.chrisdolan.pcgen.drools.type.*;

rule "Class.Monk.Init"
    when
    then
        insertLogical(new MaxClassLevel("Monk", 20));
        insertLogical(new HitDie("Monk", 8));
        insertLogical(new BABProgression("Monk", "Medium"));
        insertLogical(new SaveProgression("Monk", SavingThrow.FORT, "Fast"));
        insertLogical(new SaveProgression("Monk", SavingThrow.REFL, "Fast"));
        insertLogical(new SaveProgression("Monk", SavingThrow.WILL, "Fast"));
end


rule "Class.Monk.Ability.AC.level"
    when
        Input(type == "ClassLevel", subtype == "Monk", value > 0, $v:value)
    then
        insertLogical(new Input(ArmorClass.TYPE, ArmorClass.SUBTYPE_OTHER, $v > 20 ? 5 : $v/4));
        insertLogical(new Input("CMD", "Other", $v > 20 ? 5 : $v/4));
end
rule "Class.Monk.Ability.AC.Wis"
    when
        Input(type == "ClassLevel", subtype == "Monk", value > 0)
        StatBonus(name == StatInput.WIS, $v:value)
    then
        insertLogical(new Input(ArmorClass.TYPE, ArmorClass.SUBTYPE_OTHER, $v));
        insertLogical(new Input("CMD", "Other", $v));
end
